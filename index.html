<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>README</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>

<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>

<style type="text/css">
pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

}

	.line-numbers-rows > span {
		pointer-events: none;
		display: block;
		counter-increment: linenumber;
	}

		.line-numbers-rows > span:before {
			content: counter(linenumber);
			color: #999;
			display: block;
			padding-right: 0.8em;
			text-align: right;
		}
</style>


</head>

<body>

<h1 id="toc_0">Cloud Computing with AWS</h1>

<p><strong>Jonatan Landsberg</strong>, jonatan.landsberg@omegapoint.se<br>
<strong>David Strömberg</strong>, david.stromberg@omegapoint.se  </p>

<ol>
<li><a href="#setup">Project setup</a></li>
<li><a href="#ec2deploy">Deploy on EC2</a></li>
<li><a href="#database">Connecting your application to a RDS instance</a></li>
<li><a href="#CodePipeline1">Code Pipeline Preparations</a></li>
<li><a href="#CodePipeline2">Create the CodePipeline</a></li>
<li><a href="#Balancer">Load balancing with Elastic Load Balancer</a></li>
<li><a href="#Route53">Subdomain with Route53</a></li>
<li><a href="#less">Labs with less instructions</a></li>
</ol>

<p><a name="setup"></a></p>

<h2 id="toc_1">1. Project setup</h2>

<h3 id="toc_2">Installation</h3>

<ol>
<li>Install <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java 8</a></li>
<li>Install <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li>
<li>Install <a href="https://www.postgresql.org/ftp/pgadmin/pgadmin4/v2.0/">PgAdmin</a><br></li>
</ol>

<h3 id="toc_3">Verify local environment</h3>

<ol>
<li>Create a new <a href="https://github.com/Omegapoint/">Git repository</a> called <code>&lt;application-name&gt;</code></li>
<li>Clone the template repository <code>$ git clone --bare https://github.com/Omegapoint/cloud-computing-app.git</code></li>
<li><code>$ cd cloud-computing-app.git</code></li>
<li><code>$ git push --mirror https://github.com/Omegapoint/&lt;application-name&gt;.git</code></li>
<li><code>$ cd ..</code></li>
<li><code>$ rm -rf cloud-computing-app.git</code></li>
<li><code>$ git clone https://github.com/Omegapoint/&lt;application-name&gt;.git</code></li>
<li><code>$ cd &lt;application-name&gt; b</code></li>
<li>Build the application <code>$ ./gradlew clean build</code></li>
<li>Run the application <code>$ ./gradlew bootRun -Dspring.profiles.active=local</code></li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 1</strong></span> You can now go to <code>http://localhost:8080/cloud-computing-template-app/ping</code> in your browser att receive a <em>&quot;pong&quot;</em>.</p>

<p>If you&#39;re using IntelliJ, import the new project by: <em>New Project</em> --&gt; <em>From Existing Sources</em> . Choose Gradle as build tool.</p>

<h3 id="toc_4">Modify applicatin properties</h3>

<p>Change the name of the application in <code>application.properties</code>:</p>

<p>1 .<code>spring.application.name=&lt;application-name&gt;</code><br>
 2. <code>$ ./gradlew clean build</code>  </p>

<p><span style="color:orange"><strong>Checkpoint 2</strong></span> Gradle should now have built the jar <code>build/libs/&lt;application-name&gt;-1.0-SNAPSHOT.jar</code> and you should be able to go to <code>http://localhost:8080/&lt;application-name&gt;/ping</code> in your browser att receive a <em>&quot;pong&quot;</em>.</p>

<p>Create a new property file in <code>src/resources/</code> for production environment: <code>application-production.properties</code> with the following content:</p>

<div><pre class="line-numbers"><code class="language-properties">spring.profiles.active=production
server.port=8080

# Datasource
spring.jpa.hibernate.ddl-auto=create-drop
spring.datasource.url=jdbc:h2:file:~/test
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# h2 settings
spring.h2.console.enabled=true
spring.h2.console.path=/h2
</code></pre></div>

<p><span style="color:orange"><strong>Checkpoint 3</strong></span> You can now run the application with:</p>

<p><code>$ java -jar -Dspring.profiles.active=production build/libs/&lt;application-name&gt;-1.0-SNAPSHOT.jar</code>   </p>

<p>on your local machine. 
<a name="ec2deploy"></a></p>

<h2 id="toc_5">Deploy on EC2</h2>

<h3 id="toc_6">Setup instance</h3>

<p><a href="https://sts.omegapoint.se/adfs/ls/IdpInitiatedSignOn.aspx">Login to AWS</a>. </p>

<ol>
<li><strong>Go to the Service -&gt; EC2 -&gt; Key pairs.</strong> </li>
<li><strong>Create a new key</strong> and download an ssh key. You will use this to connect to instances that you provision during this lab. The key should be called <code>&lt;application-name&gt;-key</code> </li>
<li><strong>Choose an Instance Type</strong>

<ul>
<li>Go to the Service -&gt; EC2 -&gt; Instances. </li>
<li>Launch an EC2-instance using Amazon Linux on a <em>t2.micro</em> instance. Click <em>Next: Configure Instance Details</em></li>
</ul></li>
<li><strong>Configure Instance Details</strong> - Leave all fields as default</li>
<li><strong>Add Storage</strong> - Leave all fields as default </li>
<li><strong>Add Tags</strong> 

<ul>
<li>Key: <code>Name</code></li>
<li>Value <code>&lt;application-name&gt;</code></li>
</ul></li>
<li><strong>Configure Security Group 1</strong>

<ul>
<li>Security group name: <code>&lt;application-name&gt;-security-group</code></li>
<li>Type: <em>SSH</em></li>
<li>Protocol: <em>TCP</em></li>
<li>Port Range: <code>22</code></li>
<li>Source: <code>My IP</code></li>
<li>Description: <code>SSH for admin</code></li>
</ul></li>
<li><strong>Configure Security Group 2</strong>

<ul>
<li>Type: <em>Custom TCP</em></li>
<li>Protocol: <em>TCP</em></li>
<li>Port Range: <code>8080</code> (or whichever port your application is running)</li>
<li>Source: <code>My IP</code></li>
<li>Description <code>&lt;insert-something-smart&gt;</code></li>
</ul></li>
<li><strong>Review Instance Launch</strong> - Leave all fields as default</li>
<li><strong>Select an existing key pair or create a new key pair</strong>

<ul>
<li><em>Choose an existing key pair</em></li>
<li><code>&lt;application-name&gt;-key</code></li>
</ul></li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 4</strong></span> You can now SSH to your EC2 instance with the key you&#39;ve generated. The username is <strong>ec2-user</strong>. To ssh with a your key use the following command: <code>ssh -i key.pem ec2-user@[insert public IP of the EC2 instance]</code></p>

<h3 id="toc_7">Manual deploy</h3>

<ol>
<li>Upload your jar to to the instance with scp.</li>
<li>Install java with <code>yes | sudo yum install java-1.8.0</code> and remove Java 1.7 with <code>yes | sudo yum remove java-1.7.0</code></li>
<li>Start the application by using the command <code>java -jar -Dspring.profiles.active=production &lt;application-name&gt;.jar</code>.</li>
<li>Verify that your app is accessible from the internet by browsing the public IP address of the instance.</li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 5</strong></span> You can browse to <code>http://&lt;URL-of-your-ec2&gt;:8080/&lt;application-name&gt;/ping</code> and get the response <em>&quot;pong&quot;</em></p>

<p><a name="database"></a></p>

<h2 id="toc_8">Connect applicatoin to a DB</h2>

<h3 id="toc_9">Local DB</h3>

<p><em>Note: This section (&quot;Local DB&quot;) is not mandatory and you could jump directly to &quot;Cloud DB&quot; if you want.</em></p>

<ol>
<li>Install PostgreSQL on your local machine</li>
<li><p>Modify the content of <code>application-local.properties</code>:</p>

<div><pre class="line-numbers"><code class="language-properties">spring.profiles.active=local
server.port=8080

# Datasource
spring.jpa.hibernate.ddl-auto=create-drop
spring.datasource.url=jdbc:postgresql://localhost:5432/&lt;db-name&gt;
spring.datasource.username=&lt;username&gt;
spring.datasource.password=&lt;password&gt;</code></pre></div></li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 6</strong></span> You can now go to <code>http://localhost:8080/&lt;application-name&gt;/reverse/omegapoint</code> in your browser att receive the following content:</p>

<div><pre class="line-numbers"><code class="language-javascript">{
    &quot;input&quot;: &lt;  
}   </code></pre></div>

<h3 id="toc_10">Cloud DB</h3>

<p><a href="https://sts.omegapoint.se/adfs/ls/IdpInitiatedSignOn.aspx">Login to AWS</a>. Go to <strong>RDS</strong> under <em>&quot;Database&quot;</em>. Click on the orange button <em>&quot;Launch a DB Instance&quot;</em> and choose <em>PostgreSQL</em>. </p>

<p>Make the following choices:</p>

<ol>
<li><p><strong>Choose use case</strong></p>

<ul>
<li>Dev/Test</li>
</ul></li>
<li><p><strong>Specify DB details</strong> </p>

<ul>
<li>DB engine version: <em>PostgreSQL 9.6.2-R1</em></li>
<li>DB instance class: <em>db.t2.micro</em></li>
<li>Allocated storage: <code>20 GB</code></li>
<li>DB instance identifier: <code>&lt;application-name&gt;-db-instance</code></li>
<li>Master username: <code>&lt;username&gt;</code></li>
<li>Master password: <code>&lt;password&gt;</code></li>
</ul></li>
<li><p><strong>Configure advanced settings</strong></p>

<ul>
<li>Virtual Private Cloud (VPC): <em>Default VPC</em></li>
<li>Public accessibility: <em>Yes</em></li>
<li>Databasename: <code>&lt;application-name&gt;-db</code></li>
<li>Databaseport: <code>5432</code></li>
<li>Backup: <em>No preference</em></li>
<li>Monitoring: <em>Disable</em></li>
<li>Maintenance: <em>Disable</em></li>
<li>Maintenance window: <em>No preference</em></li>
</ul>

<p>On your RDS overview, choose <em>&quot;Instances&quot;</em> and collect the following info:</p>

<ul>
<li>Endpoint <code>&lt;endpoint&gt;</code></li>
<li>DB Name <code>&lt;db-name&gt;</code></li>
<li>Username <code>&lt;username&gt;</code></li>
<li>Password <code>&lt;password&gt;</code></li>
</ul></li>
</ol>

<p>Insert the information into <code>application-production.properties</code> in your project:</p>

<div><pre class="line-numbers"><code class="language-properties">spring.profiles.active=production
server.port=8080

# Datasource
spring.jpa.hibernate.ddl-auto=create-drop
spring.datasource.url=jdbc:postgresql://&lt;endpoint&gt;:5432/&lt;db-name&gt;
spring.datasource.username=&lt;username&gt;
spring.datasource.password=&lt;password&gt;</code></pre></div>

<p>Remember to configure the security group of your RDS instance so it allows <em>inbound</em> traffic from your EC2 instance. </p>

<p><span style="color:orange"><strong>Checkpoint 7</strong></span> You should now be able to run <code>java -jar -Dspring.profiles.active=production &lt;application-name&gt;-1.0-SNAPSHOT.jar</code> <strong>on your ec2 instance</strong> and connect your application to the RDS instance. Confirm by going to <code>http://&lt;ec2-url&gt;:8080/&lt;application-name&gt;/reverse/omegapoint</code> in your browser att receive the following content:</p>

<div><pre class="line-numbers"><code class="language-javascript">{
    &quot;input&quot;: &lt;  
}   </code></pre></div>

<p><a name="CodePipeline1"></a></p>

<h2 id="toc_11">Code Pipeline preparations</h2>

<p>The goal in this lab is to automatically test and build using CodeBuild and deploy the application after every push to master.
You will deploy using CodeDeploy which requires an agent application to be running on the EC2 instance. Therefore you will provision a new instance (using CloudFormation) and install the agent automatically.</p>

<h3 id="toc_12">Provision new EC2 instance using CloudFormation</h3>

<ol>
<li>Terminate the EC2 instance you provisioned in the previous lab</li>
<li>Download this <a href="http://s3-eu-west-1.amazonaws.com/aws-codedeploy-eu-west-1/templates/latest/CodeDeploy_SampleCF_Template.json">CloudFormation template</a>.</li>
<li>Open the template in an editor. After line 233 we want to install Java 8 and uninstall Java 7 as we did with our previous instance. Add the following lines:</li>
</ol>

<div><pre class="line-numbers"><code class="language-bash">&quot;yum install java-1.8.0 -y \n&quot;,
&quot;yum remove java-1.7.0 -y \n&quot;,</code></pre></div>

<ol>
<li>Go to the AWS service CloudFormation and click Create stack.</li>
<li>Choose <em>Upload a template to Amazon S3</em> and choose your modified template .json file</li>
<li>Specify details and parameters

<ul>
<li>Stack name: <code>&lt;application-name&gt;</code></li>
<li>InstanceCount: <code>1</code></li>
<li>InstanceType: <code>t1.micro</code></li>
<li>KeyPairName: <code>&lt;application-name&gt;-key</code></li>
<li>OperatingSystem: <code>Linux</code></li>
<li>SSHLocation: <code>My IP</code></li>
<li>TagKey: <code>Name</code></li>
<li>TagValue: <code>&lt;application-name&gt;</code></li>
</ul></li>
<li> Click Next, then Next again,</li>
<li>Tick the checkbox <em>I acknowledge that AWS CloudFormation might create IAM resources.</em> and click Create.</li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 8</strong></span> Make sure the template creation runs smooth and that your stack in CloudFormation gets the status <em>CREATE_COMPLETE</em>. Find the new EC2 instance and make sure you can SSH to it.</p>

<h3 id="toc_13">Bulid specification for CodeBuild</h3>

<p>CodeBuild requires a buildspec.yml file to be in the root of your application:</p>

<h5 id="toc_14">buildspec.yml</h5>

<div><pre class="line-numbers"><code class="language-yaml">version: 0.2
phases:
  build:
    commands:
      - echo Build started on `date`
      - sh gradlew clean assemble
artifacts:
  files:
    - appspec.yml
    - &#39;build/libs/*.jar&#39;
    - start_application.sh
  discard-paths: yes</code></pre></div>

<h3 id="toc_15">Deploy specification for CodeDeploy</h3>

<p>CodeDeploy requires two files:</p>

<h5 id="toc_16">appspec.yml</h5>

<div><pre class="line-numbers"><code class="language-yaml">version: 0.0
os: linux
files:
  - source: &lt;application-name&gt;-&lt;version&gt;.jar
    destination: /tmp
hooks:
  ApplicationStart:
    - location: start_application.sh
      timeout: 500
      runas: root</code></pre></div>

<h5 id="toc_17">start_application.sh</h5>

<div><pre class="line-numbers"><code class="language-bash">#!/bin/bash

touch app.log
nohup java -jar /tmp/*.jar -Dspring.profiles.active=production &gt; app.log 2&gt;&amp;1 &amp;</code></pre></div>

<p>You may have to modify these files to fit your application.</p>

<p><span style="color:orange"><strong>Checkpoint 9</strong></span> Push these files to your repository.
<a name="CodePipeline2"></a></p>

<h2 id="toc_18">Create the CodePipeline</h2>

<ol>
<li>Go to the service CodePipeline and click <em>Create Pipeline</em></li>
<li>Name it <code>&lt;application-name&gt;-CodePipeline</code> and click next step</li>
<li>For <em>Source provider</em> chooce Github and click <em>Connect to Github</em> and authorize AWS to access your Github resources</li>
<li>In <em>Repository</em> choose your application repository, then select the branch on which the version of the application that you want to deploy is (typiclly <em>master</em>). Then click <em>next</em>.</li>
</ol>

<h4 id="toc_19">CodeBuild</h4>

<ul>
<li><strong>Build</strong>

<ul>
<li>Build provider: <code>AWS CodeBuild</code></li>
<li>Configure your project -&gt; Create a new build project</li>
<li>Project Name: <code>&lt;application-name&gt;-CodeBuild</code></li>
</ul></li>
<li><strong>Environment: How to build</strong>

<ul>
<li>Environment image: <code>Use an image managed by AWS CodeBuild</code></li>
<li>Operating system: <code>Ubuntu</code></li>
<li>Runtime: <code>Java</code></li>
<li>Version: <em>&quot;aws/codebuild/java:openjdk-8&quot;</em></li>
<li>Build specification: <em>&quot;Use the buildspec.yml in the source code root directory&quot;</em></li>
</ul></li>
<li><strong>AWS CodeBuild service role</strong>

<ul>
<li>Select <em>Create a service role in your account</em></li>
<li>Role name: Leave as default</li>
<li>Click <em>Save build project</em></li>
<li>After the build project is saved click <em>Next step</em></li>
</ul></li>
</ul>

<h4 id="toc_20">CodeDeploy</h4>

<p>Deployment provider: <code>AWS CodeDeploy</code></p>

<ul>
<li><strong>AWS CodeDeploy</strong>

<ul>
<li>Click the link <em>create a new one in AWS CodeDeploy</em></li>
<li>Application name: <code>&lt;application-name&gt;-Application</code></li>
<li>Deployment group: <code>&lt;application-name&gt;-DeploymentGroup</code></li>
<li>Deployment type: In-place deployment</li>
</ul></li>
<li><strong>Environment configuration</strong>

<ul>
<li>Choose Amazon EC2 instances</li>
<li>Key: <code>Name</code></li>
<li>Value: <code>&lt;application-name&gt;</code> make sure you see the EC2 instance created by the CloudFormation template in the <em>Matching instances</em> section</li>
<li>Do not tick the box <em>Enable load balancing</em></li>
</ul></li>
<li><strong>Deployment configuration</strong>

<ul>
<li>Leave as default</li>
</ul></li>
<li><strong>Service role</strong>

<ul>
<li>Service role ARN: Select the role named <code>BlueGreenCodeDeployServiceRole</code></li>
<li>Click create application</li>
</ul></li>
</ul>

<h4 id="toc_21">CodePipeline</h4>

<p>Go back to the pipeline tab</p>

<ul>
<li><strong>AWS CodeDeploy</strong>

<ul>
<li>Application name: <code>&lt;application-name&gt;-Application</code></li>
<li>Deployment group: <code>&lt;application-name&gt;-DeploymentGroup</code></li>
<li>Click <em>Next step</em></li>
<li>Role name: <code>AWS-CodePipeline-Service</code></li>
<li>Click <em>Next step</em></li>
<li>Review your pipeline, then click <em>Create pipeline</em></li>
</ul></li>
</ul>

<p><span style="color:orange"><strong>Checkpoint 10</strong></span> At this point you should see your pipeline. Unless it starts automatically click <code>Release change</code>. Make sure your source code is built and deployed successfully. If there are issues, resolve these before moving on.</p>

<p><a name="Balancer"></a></p>

<h2 id="toc_22">Load balancing with Elastic Load Balancer</h2>

<ol>
<li>Go to EC2 -&gt; Load Balancers and click <em>Create Load Balancer</em></li>
<li><em>Create</em> an Application Load Balancer</li>
<li><strong>Basic Configuration</strong>

<ul>
<li>Name: <code>&lt;application-name&gt;-ALB</code></li>
<li>Scheme: <em>internet-facing</em></li>
<li>IP address type: <em>ipv4</em></li>
</ul></li>
<li><strong>Listeners</strong>

<ul>
<li>Leave as default</li>
</ul></li>
<li><strong>Availability Zones</strong>

<ul>
<li>VPC: Select whichever VPC is marked <em>default</em></li>
<li>Select all availability zones</li>
<li>Click _Next: Configure Security Settings</li>
</ul></li>
<li><strong>Conigure Security Settings</strong>

<ul>
<li>Leave as defualt, click <em>Next: Configure Security Groups</em></li>
</ul></li>
<li><strong>Configure Security Groups</strong>

<ul>
<li>Choose <em>Select an <strong>existing</strong> seurity group</em></li>
<li>Select the group previously created: <code>&lt;application-name&gt;-security-group</code></li>
<li>Click <em>Next: Configure Routing</em></li>
</ul></li>
<li><strong>Configure Routing</strong>

<ul>
<li>Target group: New target group</li>
<li>Name: <code>&lt;application-name&gt;-TargetGroup</code></li>
<li>Protocol: HTTP</li>
<li>Port: 8080 (or the custom port on which your application is running)</li>
<li>Target type: instance</li>
<li><strong>Healtch Checks</strong></li>
<li>Protocol: HTTP</li>
<li>Path: any valid path where your application responds with <code>HTTP 200</code></li>
<li><strong>Advanced healthcheck settings</strong></li>
<li>Port: traffic port</li>
<li>Healthy treshold: 2</li>
<li>Unhealthy treshold: 2</li>
<li>Timeout: 5</li>
<li>Interval: 10</li>
<li>Success codes: 200-299</li>
<li>Click <em>Next: Register Targets</em></li>
</ul></li>
<li><strong>Register Targets</strong>

<ul>
<li>Search for your EC2 instance in the <em>Instances</em> section</li>
<li>Select your instance and click <em>Add to registered</em></li>
<li>Click <em>Next: Review</em></li>
</ul></li>
<li><strong>Review</strong>

<ul>
<li>Review your Load Balancer configuration and click <em>Create</em></li>
</ul></li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 10</strong></span> Verify your ALB is working</p>

<ul>
<li>Go to EC2 -&gt; Load Balancers and find your Load Balancer</li>
<li>Wait until the state of the Load Balancer changes from <em>provisioning</em> to <em>active</em></li>
<li>Go to EC2 -&gt; Target groups and find the target group containing your instance</li>
<li>Click the <em>Targets</em> tab and verify that your instance has the status healthy. If properly configured it will take up to 20 seconds for the instance to pass its healthcheck.</li>
<li>Browse to the DNS name of the Load Balancer (including request mapping) and verify that you reach your application</li>
</ul>

<p><a name="Route53"></a></p>

<h2 id="toc_23">Subdomain with Route53</h2>

<ol>
<li>Go to Route53 -&gt; Hosted zones and click <em>lab.omegapint.academy</em>.</li>
<li>Click <em>Create record set</em></li>
<li><strong>Creat record set</strong>

<ul>
<li>Name: choose a subdomain (e.g. test.lab.omegapoint.academy)</li>
<li>Type: A - IPv4 address</li>
<li>Alias: Yes</li>
<li>Alias target: select your ALB</li>
<li>Routing policy: Simple</li>
<li>Evaluate Targe Health: No</li>
<li>Click: <em>Save Record Set</em></li>
</ul></li>
</ol>

<p><span style="color:orange"><strong>Checkpoint 10</strong></span> Verify that you reach your application using the subdomain
<a name="less"></a></p>

<h2 id="toc_24">Labs with less instructions</h2>

<h3 id="toc_25">Auto scaling</h3>

<p>Make your application highly available by launching your EC2 instances from/in an auto scaling group.</p>

<p>High level outline
  - Create an auto scaling group and launch configuration
  - Configure CodeDeploy to deploy to the auto scaling group instead of the single EC2 instance used in the previous labs
  - Configure the ALB to route to the EC2 instances in your auto scaling group.</p>

<h3 id="toc_26">Lambda</h3>

<p>Create a Lambda function with API Gateway replicating the behaviour of the Spring application used in previous labs.</p>

<p>Java is optional. Consider using the <a href="https://serverless.com/">Serverless framework</a>.</p>

<p>This lab could be finished by configuring weighted routing for your record set in Route53. Equal weights would send half the traffic to your EC2 instance, and half the traffic to your Lambda.</p>



<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>

<script type="text/javascript">
!function(e){var t={variable:[{pattern:/\$?\(\([\w\W]+?\)\)/,inside:{variable:[{pattern:/(^\$\(\([\w\W]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee]-?\d+)?)\b/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\([^)]+\)|`[^`]+`/,inside:{variable:/^\$\(|^`|\)$|`$/}},/\$(?:[a-z0-9_#\?\*!@]+|\{[^}]+\})/i]};e.languages.bash={shebang:{pattern:/^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/,alias:"important"},comment:{pattern:/(^|[^"{\\])#.*/,lookbehind:!0},string:[{pattern:/((?:^|[^<])<<\s*)(?:"|')?(\w+?)(?:"|')?\s*\r?\n(?:[\s\S])*?\r?\n\2/g,lookbehind:!0,inside:t},{pattern:/(["'])(?:\\\\|\\?[^\\])*?\1/g,inside:t}],variable:t.variable,"function":{pattern:/(^|\s|;|\||&)(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|\s|;|\||&)/,lookbehind:!0},keyword:{pattern:/(^|\s|;|\||&)(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|\s|;|\||&)/,lookbehind:!0},"boolean":{pattern:/(^|\s|;|\||&)(?:true|false)(?=$|\s|;|\||&)/,lookbehind:!0},operator:/&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];]/};var a=t.variable[1].inside;a["function"]=e.languages.bash["function"],a.keyword=e.languages.bash.keyword,a.boolean=e.languages.bash.boolean,a.operator=e.languages.bash.operator,a.punctuation=e.languages.bash.punctuation}(Prism);
</script>

<script type="text/javascript">
Prism.languages.yaml={scalar:{pattern:/([\-:]\s*(![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\3[^\r\n]+)*)/,lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:/(\s*[:\-,[{\r\n?][ \t]*(![^\s]+)?[ \t]*)[^\r\n{[\]},#]+?(?=\s*:\s)/,lookbehind:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(\d{4}-\d\d?-\d\d?([tT]|[ \t]+)\d\d?:\d{2}:\d{2}(\.\d*)?[ \t]*(Z|[-+]\d\d?(:\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(:\d{2}(\.\d*)?)?)(?=[ \t]*($|,|]|}))/m,lookbehind:!0,alias:"number"},"boolean":{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(true|false)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},"null":{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(null|~)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},string:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')(?=[ \t]*($|,|]|}))/m,lookbehind:!0},number:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)[+\-]?(0x[\da-f]+|0o[0-7]+|(\d+\.?\d*|\.?\d+)(e[\+\-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,lookbehind:!0},tag:/![^\s]+/,important:/[&*][\w]+/,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./};
</script>

<script type="text/javascript">
Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};
</script>

<script type="text/javascript">
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript;
</script>

<script type="text/javascript">
!function(){"undefined"!=typeof self&&self.Prism&&self.document&&Prism.hooks.add("complete",function(e){if(e.code){var t=e.element.parentNode,s=/\s*\bline-numbers\b\s*/;if(t&&/pre/i.test(t.nodeName)&&(s.test(t.className)||s.test(e.element.className))&&!e.element.querySelector(".line-numbers-rows")){s.test(e.element.className)&&(e.element.className=e.element.className.replace(s,"")),s.test(t.className)||(t.className+=" line-numbers");var n,a=e.code.match(/\n(?!$)/g),l=a?a.length+1:1,m=new Array(l+1);m=m.join("<span></span>"),n=document.createElement("span"),n.className="line-numbers-rows",n.innerHTML=m,t.hasAttribute("data-start")&&(t.style.counterReset="linenumber "+(parseInt(t.getAttribute("data-start"),10)-1)),e.element.appendChild(n)}}})}();
</script>


</body>

</html>
